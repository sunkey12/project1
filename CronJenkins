 pipeline {
        agent any
   //    triggers {
   //         cron('*/5 * * * *')
   //     }
         stages {    
         stage('Dockerlogin') {
            steps {
               withCredentials([usernamePassword(credentialsId: 'docker-cred', passwordVariable: 'DOCKER_PASSWORD', usernameVariable: 'DOCKER_USERNAME')]) {
                      sh "echo $DOCKER_PASSWORD | docker login -u $DOCKER_USERNAME --password-stdin"
                      sh 'echo $DOCKERHUB_PASSWORD'
                      sh 'echo $DOCKERHUB_USERNAME' 
             }
           }
          }
          stage('Build_Number') {
             steps {
             sh 'pwd' 
             sh 'cd /home/user/jenkins/jobs/dockerfile/builds'
             sh "cat permalinks  | grep lastSuccessfulBuild | awk '{print \$2}'", returnstdout: true).trim()
             }
             } 
          }
          
         }    
        
